{% macro prefecture_options(current = "") %}
    {% from _self import option %}
    {% set all = {
            "北海道・東北地方": ["北海道","青森県","岩手県","秋田県","宮城県","山形県","福島県"],
            "関東地方": ["栃木県","群馬県","茨城県","埼玉県","東京都","千葉県","神奈川県"],
            "中部地方": ["山梨県","長野県","新潟県","富山県","石川県","福井県","静岡県","岐阜県","愛知県"],
            "近畿地方": ["三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県"],
            "四国地方": ["徳島県","香川県","愛媛県","高知県"],
            "中国地方": ["鳥取県","島根県","岡山県","広島県","山口県"],
            "九州・沖縄地方": ["福岡県","佐賀県","長崎県","大分県","熊本県","宮崎県","鹿児島県","沖縄県"],
        }
    %}
        <option value="">【選択して下さい】</option>
        {% for area,prefs in all %}
        <optgroup label="{{ area }}">
            {% for pref in prefs %}
                {{ option(pref, current == pref) }}
            {% endfor %}
        </optgroup>
        {% endfor %}
{% endmacro %}

{% macro option(value, selected, label = "") %}
    {% set label = label == "" ? value : label %}
    <option {% if selected %} selected="selected" {% endif %} value="{{value}}">{{label}}</option>
{% endmacro %}

{% macro errors(field, wrapper = "p") %}
    {% from _self import get_error_message %}
    {% if field.errors %}
        {% for err in field.errors %}
            <{{ wrapper }}>{{ get_error_message(err, field.label, field.type) }}</{{ wrapper }}>
        {% endfor %}
    {% endif %}
{% endmacro %}

{% macro get_error_message(error, label, type = "text") %}
    {% if error == "required" %}
        {% set str = type == "radio" or type == "select"
            ? "※%sを選択してください。"
            : "※%sを入力してください。"
        %}
        {{ str|format(label)}}
    {% else %}
        {{"※正しい%sの形式でご入力頂けますようお願い致します"|format(label)}}
    {% endif %}
{% endmacro %}

{% macro input(field, class="", id="") %}
    {% if field.type == "select" %}
    {% elseif field.type == "radio" %}
    {% elseif field.type == "checkbox" %}
    {% elseif field.type == "textarea" %}
    {% else %}
        <input class="{{ class }}"
                id="{{ id }}"
               value="{{field.value}}"
               type="{{ field.type }}"
               name="{{ field.name }}"
               value="{{ field.value }}"
               placeholder="{{ field.placeholder }}"
        >
    {% endif %}
{% endmacro %}

{% macro hidden(field) %}
    <input type="hidden" name="{{ field.name }}" value="{{ field.value }}">
{% endmacro %}